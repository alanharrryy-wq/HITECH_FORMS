{% extends "base.html" %}
{% block content %}
<section class="panel">
  <h1>Field Editor</h1>
  <p class="muted">Form #{{ form.id }} | status: {{ form.status }} | slug: <code>{{ form.slug }}</code></p>
  {% if error %}<p class="error">{{ error }}</p>{% endif %}
  <form method="post" action="/admin/forms/{{ form.id }}/edit">
    <input type="hidden" name="token" value="{{ token }}">
    <div class="row">
      <label>
        Title
        <input type="text" name="title" value="{{ form.title }}" required>
      </label>
      <label>
        Slug
        <input type="text" name="slug" value="{{ form.slug }}" required>
      </label>
    </div>
    <button type="submit">Save form metadata</button>
  </form>
</section>

<section class="panel">
  <h2>Dynamic Fields JSON</h2>
  <p class="muted">Allowed types: text, textarea, number, email, select, checkbox, date.</p>
  <form method="post" action="/admin/forms/{{ form.id }}/fields">
    <input type="hidden" name="token" value="{{ token }}">
    <textarea name="fields_json" required>{{ fields_json }}</textarea>
    <div class="row">
      <button type="submit">Save fields</button>
      <a class="btn alt" href="/admin/forms/{{ form.id }}/submissions?token={{ token }}">View submissions</a>
    </div>
  </form>
</section>

<section class="panel">
  <h2>Publish / Delete</h2>
  <div class="row">
    <form method="post" action="/admin/forms/{{ form.id }}/publish">
      <input type="hidden" name="token" value="{{ token }}">
      <button type="submit">Publish form</button>
    </form>
    <form method="post" action="/admin/forms/{{ form.id }}/delete" onsubmit="return confirm('Delete this form?');">
      <input type="hidden" name="token" value="{{ token }}">
      <button class="warn" type="submit">Delete form</button>
    </form>
  </div>
</section>
{% endblock %}
